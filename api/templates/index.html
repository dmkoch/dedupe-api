{% extends 'base.html' %}
{% block content %}
<div class="row">
    {% if 'admin' in roles %}
        <div class="col-md-8">
    {% else %}
        <div class="col-md-12">
    {% endif %}
        <h2>Ready for review</h2>
        <table class="table">
            <thead>
                <tr>
                    <th>Name</th>
                    {% if 'admin' in roles %}
                        <th></th>
                        <th></th>
                    {% endif %}
                    <th></th>
                </tr>
            </thead>
            <tbody id="session-list"></tbody>
        </table>
    </div>
    {% if 'admin' in roles %}
    <div class="col-md-4 panel">
        <h4>Add a new dataset</h4>
        <a role="button" href="{{url_for('trainer.train')}}" class="btn btn-default">Start &gt; </a>
        <hr />
    </div>
    {% endif %}
</div>
{% endblock %}
{% block extra_javascript %}
<script type='text/javascript'>
    $(document).ready(function(){
        $.when($.getJSON('/session-list/')).then(
          function(resp){
                var rows = ''
                $.each(resp.objects, function(i, object){
                    rows += '<tr><td>' + object.name + '</td>';
                    rows += '<td><a href="/session-review/' + object.id + '/">Review Queue</a></td>';
                    {% if 'admin' in roles %}
                    rows += '<td><a href="/bulk-match-demo/' + object.id + '/">Bulk Match</a></td>';
                    rows += '<td><a href="/delete-session/' + object.id + '/">Delete</a></td>';
                    {% endif %}
                    rows += '</tr>';
                });
                $('#session-list').html(rows);
            }
        )
    })
</script>
{% endblock %}
